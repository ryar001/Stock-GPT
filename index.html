<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stock Analyst Chat</title>
  <link rel="stylesheet" href="index.css">
  <script type="importmap">
    {
      "imports": {
        "@google/genai": "https://esm.sh/@google/genai@^0.7.0",
        "jspdf": "https://esm.sh/jspdf@^2.5.1",
        "jspdf-autotable": "https://esm.sh/jspdf-autotable@^3.8.2"
      }
    }
  </script>
</head>
<body>
  <main id="chat-container">
    <header>
      <h1 data-translate-key="title">Stock Analyst</h1>
      <div class="header-controls">
        <select id="language-select" aria-label="Select language">
          <option value="en">English</option>
          <option value="es">Español</option>
          <option value="zh-CN">简体中文</option>
        </select>
        <button id="theme-toggle" aria-label="Toggle dark mode">
          <svg class="sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.64 5.64c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l1.41 1.41c.39.39 1.02.39 1.41 0s.39-1.02 0-1.41L5.64 5.64zm12.72 12.72c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l1.41 1.41c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41l-1.41-1.41zM5.64 18.36l-1.41-1.41c-.39-.39-.39-1.02 0-1.41s1.02-.39 1.41 0l1.41 1.41c.39.39.39 1.02 0 1.41s-1.02.39-1.41 0zm12.72-12.72l-1.41-1.41c-.39-.39-.39-1.02 0-1.41s1.02-.39 1.41 0l1.41 1.41c.39.39.39 1.02 0 1.41-.39.39-1.02.39-1.41 0z"/></svg>
          <svg class="moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-3.31 0-6-2.69-6-6 0-1.82.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"/></svg>
        </button>
      </div>
    </header>
    <div id="message-list">
        <div class="message ai-message">
            <div class="message-content">
              <p data-translate-key="welcome">Welcome! Ask a question about a stock, or select a specific report type below.</p>
            </div>
        </div>
    </div>
    <div id="analysis-options">
      <fieldset>
        <legend data-translate-key="analysis_type_legend">Choose Analysis Type</legend>
        <div>
          <input type="radio" id="chat" name="analysis-type" value="chat" checked>
          <label for="chat" data-translate-key="analysis_type_chat">Chat</label>
        </div>
        <!-- Other options are dynamically inserted here by the script -->
      </fieldset>
    </div>
    <form id="chat-form">
      <input type="text" id="prompt-input" placeholder="Ask about a stock (e.g., 'moat analysis for TSLA')..." autocomplete="off" required>
      <button type="submit" aria-label="Send message">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
      </button>
    </form>
  </main>
  <div id="tutorial-overlay" class="hidden">
    <div id="tutorial-highlight"></div>
    <div id="tutorial-tooltip">
      <h4 id="tutorial-title"></h4>
      <p id="tutorial-description"></p>
      <div class="tutorial-nav">
        <button id="tutorial-skip">Skip</button>
        <button id="tutorial-next">Next</button>
      </div>
    </div>
  </div>
  <script type="module" src="index.tsx"></script>
</body>
</html>